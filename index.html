<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BrainQuest</title>
</head>
<style>
body {
    font-family: Arial, sans-serif;
    text-align: center;
    background-color: #f4f4f4;
}

.container {
    display: none;
    padding: 20px;
}

.active {
    display: block;
}

.map-container {
    width: 70%;
    margin: auto;
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    padding: 20px;
    height: 500px;
    position: relative;
    border: 2px solid #000;
    background: url('map.gif') no-repeat center center;
    background-size: contain;
}

.house {
    width: 50px;
    height: 50px;
    background-color: #ffcc00;
    margin: 10px;
    display: inline-block;
    text-align: center;
    line-height: 50px;
    font-weight: bold;
    cursor: pointer;
    border: 2px solid #000;
    border-radius: 5px;
}

.house.locked {
    background-color: #ccc;
    cursor: not-allowed;
}

button {
    padding: 10px 20px;
    font-size: 16px;
    border: none;
    background-color: #28a745;
    color: white;
    cursor: pointer;
    border-radius: 5px;
}

button:hover {
    background-color: #218838;
}

input {
    padding: 10px;
    font-size: 16px;
    margin-bottom: 10px;
}
#leaderboard {
            margin-top: 20px;
            padding: 10px;
            background: white;
            display: inline-block;
            border-radius: 5px;
        }

</style>
<body>
    <div id="welcome" class="container active">
        <h1>Welcome to BrainQuest</h1>
        <input type="text" id="playerName" placeholder="Enter your name">
        <div id="camera-container">
            <video id="camera" style="display:none;" autoplay></video>
            <button onclick="startCamera()">Start Camera</button>
            <button onclick="captureFaceID()">Capture Face ID</button>
        </div>
        <button onclick="nextPage('mechanics')">Start</button>
    </div>


    <div id="mechanics" class="container">
        <h1>Game Mechanics</h1>
        <p>Answer the questions in each house to proceed to the next one.</p>
        <button onclick="nextPage('map')">Play</button>
    </div>

    <div id="map" class="container">
        <h1>Game Map</h1>
        <div class="map-container">
            <div class="house" id="house1" onclick="startHouse(1)">1</div>
            <div class="house locked" id="house2" onclick="startHouse(2)">2</div>
            <div class="house locked" id="house3" onclick="startHouse(3)">3</div>
            <div class="house locked" id="house4" onclick="startHouse(4)">4</div>
            <!-- Add up to 25 houses -->
        </div>
        <div id="leaderboard">
            <h2>Leaderboard</h2>
            <ol id="leaderboard-list"></ol>
        </div>
    </div>
    
    <script>
   let leaderboard = [];

function startCamera() {
            const video = document.getElementById("camera");
            navigator.mediaDevices.getUserMedia({ video: true })
                .then(stream => {
                    video.srcObject = stream;
                    video.style.display = "block";
                })
                .catch(error => {
                    alert("Failed to access camera. Please allow camera permissions.");
                });
        }

        function captureFaceID() {
            const video = document.getElementById("camera");
            if (!video.srcObject) {
                alert("Start the camera first!");
                return;
            }
            alert("Face ID Captured! Proceeding...");
            video.srcObject.getTracks().forEach(track => track.stop());
            video.style.display = "none";
        }


        function nextPage(page) {
    document.querySelectorAll('.container').forEach(div => div.classList.remove('active'));
    document.getElementById(page).classList.add('active');
}

function startHouse(house) {
    if (document.getElementById(`house${house}`).classList.contains('locked')) {
        alert('This house is locked!');
        return;
    }
    
    let answer = prompt(`Answer the question for House ${house}: What is 2 + 2?`);
    if (answer == 4) {
        alert('Correct! Proceeding to the next house.');
        unlockHouse(house + 1);
        updateLeaderboard();
    } else {
        alert('Wrong answer! Try again.');
    }
}

function unlockHouse(house) {
    let nextHouse = document.getElementById(`house${house}`);
    if (nextHouse) {
        nextHouse.classList.remove('locked');
    }
}

function updateLeaderboard() {
    const playerName = document.getElementById("playerName").value || "Player";
    
    // Count only answered houses (excluding the locked ones)
    let progress = document.querySelectorAll(".house:not(.locked)").length - 1; 

    let existingPlayer = leaderboard.find(player => player.name === playerName);
    if (existingPlayer) {
        existingPlayer.progress = progress;
    } else {
        leaderboard.push({ name: playerName, progress });
    }
    
    // Sort leaderboard (highest progress first)
    leaderboard.sort((a, b) => b.progress - a.progress);
    
    // Update leaderboard UI
    const leaderboardList = document.getElementById("leaderboard-list");
    leaderboardList.innerHTML = "";
    leaderboard.forEach(player => {
        let listItem = document.createElement("li");
        listItem.textContent = `${player.name}: ${player.progress} houses`;
        leaderboardList.appendChild(listItem);
    });
}
    </script>
</body>
</html>
